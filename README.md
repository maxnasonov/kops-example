# Description

Based on updated terraform modules by [Cloud Posse](https://github.com/cloudposse).
Terraform templates:
* generated by kops version 1.11.1
* custom for Redis and MySQL RDS instances

# Usage

1. Set environment variables

        AWS_PROFILE=<AWS_PROFILE_NAME>
        AWS_DEFAULT_REGION=ap-southeast-1
2. Create a state S3 bucket and specify it in config.tf
3. Copy terraform.tfvars.example to terraform.tfvars
4. Specify a public route53 zone in terraform.tfvars

        domain_zone = "example.com"
5. Run

        terraform init

6. Run
        
        kops create cluster --name=k8s.<DOMAIN_ZONE> --dns-zone=<DOMAIN_ZONE> --out=. --target=terraform --state=s3://<STATE_BUCKET>/kops --cloud aws --zones "ap-southeast-1a,ap-southeast-1b,ap-southeast-1c" --node-count 3 --bastion=true --topology=private --networking weave
        
7. Run

        terraform apply

# Screenshots

![](images/kops.png?raw=true)
![](images/ec2.png?raw=true)
![](images/rds.png?raw=true)
![](images/redis.png?raw=true)
![](images/route53_k8s.png?raw=true)
